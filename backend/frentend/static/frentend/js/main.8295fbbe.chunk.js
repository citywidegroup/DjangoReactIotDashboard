(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{116:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(24),l=t.n(r),s=(t(83),t(121)),o=t(32),m=t(17),i=(t(43),t(124)),u=t(123);var d=function(){return c.a.createElement(i.a,{expand:"lg",variant:"dark",bg:"dark"},c.a.createElement(i.a.Brand,{href:"#"},"IOT"),c.a.createElement(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(i.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(u.a,{className:"mr-auto"},c.a.createElement(u.a.Link,null,c.a.createElement(o.b,{to:"/",className:"nav-link"},"Http")),c.a.createElement(u.a.Link,null,c.a.createElement(o.b,{to:"/ws",className:"nav-link"},"WebSocket")))))},E=t(16),g=t(11),v=t(120),f=t(71),b=t.n(f),h=[{name:"Reading",selector:"reading",sortable:!0,center:!0},{name:"TimeStamp",selector:"timestamp",sortable:!0,center:!0},{name:"SensorType",selector:"sensorType",sortable:!0,center:!0}];var p=function(e){return c.a.createElement("div",null,c.a.createElement(b.a,{title:"Dashboard",columns:h,theme:"solarized",data:e.data,pagination:!0,paginationPerPage:5,paginationRowsPerPageOptions:[5,10,15,20,25,30]}))},O=t(75);var k=function(e){var a=Object(n.useState)([{values:[{x:0,y:0}]}]),t=Object(g.a)(a,2),r=t[0],l=t[1];return Object(n.useEffect)((function(){}),[]),Object(n.useEffect)((function(){if(0!=e.data.length){var a=Object(E.a)(r),t=new Date(1e3*e.data[0].timestamp),n={x:60*t.getHours()+t.getMinutes(),y:e.data[0].reading};a[0].values=[].concat(Object(E.a)(a[0].values),[n]),l(a)}}),[e.data]),c.a.createElement("div",null,c.a.createElement(O.LineChart,{data:r,width:600,height:430,margin:{top:10,bottom:50,left:50,right:10}}))},w=t(122),j=t(118),S=t(76),N=t(125),y=t(119);var C=function(e){var a=Object(n.useState)({}),t=Object(g.a)(a,2),r=t[0],l=t[1],s=Object(n.useState)(),o=Object(g.a)(s,2),m=o[0],i=o[1];return Object(n.useEffect)((function(){if(0!==e.data.length){e.data[0];l(e.data[0])}var a=e.log;i(a)}),[e.data,e.log]),c.a.createElement(w.a,null,c.a.createElement(w.a.Group,{controlId:"formPostRequestText"},c.a.createElement(j.a,null,c.a.createElement(w.a.Label,{column:!0,sm:"2"},"Post request text :"),c.a.createElement(S.a,{sm:"10"},c.a.createElement(w.a.Control,{type:"email",value:JSON.stringify(r)})))," ",c.a.createElement("br",null),m&&c.a.createElement(j.a,null,c.a.createElement(S.a,{sm:"12"},c.a.createElement(N.a,{variant:m.status},m.message))),c.a.createElement(j.a,null,c.a.createElement(S.a,{md:{span:6,offset:5}},c.a.createElement(y.a,{variant:"success",onClick:e.sendhandleClick},"Generator & Send")," ",c.a.createElement(y.a,{variant:"warning",onClick:e.genertorhandleClick},"Streaming")))))},T=new WebSocket("ws://"+window.location.host+"/ws/streaming/room_name/");var D=function(){var e=Object(n.useState)([]),a=Object(g.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(),s=Object(g.a)(l,2),o=s[0],m=s[1];T.onmessage=function(e){1440===t.length&&r([]);var a=[JSON.parse(e.data)].concat(Object(E.a)(t));r(a)},T.onclose=function(e){m({status:"danger",message:"socket closed unexpectedly"})};var i=function(){m({status:"primary",message:"Sending Data to Backend..."}),T.send(JSON.stringify({reading:Math.random(),timestamp:Date.now(),sensorType:"Temperature"})),m({status:"success",message:"Sent Data to Backend..."})};return c.a.createElement(v.a,null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-5"},c.a.createElement(p,{data:t})),c.a.createElement("div",{className:"col-7"},c.a.createElement(k,{data:t}))),c.a.createElement("hr",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement(C,{data:t,log:o,sendhandleClick:i,genertorhandleClick:function(){setInterval(i,100)}}))))},x=t(40),B=t.n(x),I="collector/";var P=function(){var e=Object(n.useState)([]),a=Object(g.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(),s=Object(g.a)(l,2),o=s[0],m=s[1];Object(n.useEffect)((function(){setInterval(i,500),B.a.get(I).then((function(e){var a=[e.data].concat(Object(E.a)(t));r(a),setInterval(i,500)})).catch((function(e){console.log(e)}))}),[]);var i=function(){B.a.get(I).then((function(e){if(e.data.timestamp!==t.timestamp){var a=[e.data].concat(Object(E.a)(t));r(a)}})).catch((function(e){m({status:"danger",message:e})}))},u=function(){m({status:"primary",message:"Sending Data to Backend..."}),B.a.post(I+"v1/iotdata/",{reading:Math.random(),timestamp:Date.now(),sensorType:"Temperature"}).then((function(e){m({status:"success",message:"Sent Data to Backend..."})})).catch((function(e){m({status:"danger",message:e})}))};return c.a.createElement(v.a,null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-5"},c.a.createElement(p,{data:t})),c.a.createElement("div",{className:"col-7"},c.a.createElement(k,{data:t}))),c.a.createElement("hr",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement(C,{data:t,log:o,sendhandleClick:u,genertorhandleClick:function(){setInterval(u,600)}}))))};var J=function(){return c.a.createElement("div",null,c.a.createElement(o.a,null,c.a.createElement("div",null,c.a.createElement("header",null,c.a.createElement(d,null)),c.a.createElement(s.a,null,c.a.createElement(m.c,null,c.a.createElement(m.a,{path:"/ws",component:D}),c.a.createElement(m.a,{path:"/",component:P}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,a,t){e.exports=t(116)},83:function(e,a,t){}},[[78,1,2]]]);
//# sourceMappingURL=main.8295fbbe.chunk.js.map